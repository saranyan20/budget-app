(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03db478a"],{"81d8":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CRow",[n("CCol",{attrs:{sm:"12"}},[n("CCard",[n("CCardHeader",[n("CRow",[n("CCol",{staticClass:"mt-3"},[n("h5",[e._v("Expense Category")])]),n("CCol",{style:{textAlign:"right"},attrs:{sm:"9"}},[n("CButton",{attrs:{color:"primary"},on:{click:function(t){e.addModal=!e.addModal,e.update=!1,e.reset()}}},[e._v("Add Category")])],1),n("CModal",{staticClass:"addCategoryModal",attrs:{title:e.update?"Edit Category":"Add Category",show:e.addModal,centered:"",fade:""},on:{"update:show":function(t){e.addModal=t}}},[n("CInput",{attrs:{horizontal:"",label:"Category",lazy:!1,value:e.$v.expenseCategory.category_name.$model,isValid:e.checkIfValid("category_name"),invalidFeedback:e.categoryNameFeedback?e.categoryNameFeedback:"Enter a valid category name"},on:{"update:value":function(t){return e.$set(e.$v.expenseCategory.category_name,"$model",t)}}}),n("CInput",{attrs:{horizontal:"",label:"Sequence",lazy:!1,value:e.$v.expenseCategory.sequence.$model,isValid:e.checkIfValid("sequence"),invalidFeedback:e.sequenceFeedback?e.sequenceFeedback:"Enter a valid sequence number"},on:{"update:value":function(t){return e.$set(e.$v.expenseCategory.sequence,"$model",t)}}}),n("br"),n("CButton",{staticClass:"m-1",style:{float:"right"},attrs:{type:"submit",color:"primary"},on:{click:function(t){e.update?e.updateCategory():e.addCategory()}}},[e._v("Submit")]),n("CButton",{staticClass:"m-1",style:{float:"right"},attrs:{type:"submit",color:"secondary"},on:{click:function(t){e.addModal=!1}}},[e._v("Cancel")])],1)],1)],1),n("CCardBody",[n("CDataTable",{attrs:{items:e.expenseCategoryList,fields:e.fields,"column-filter":!1,"items-per-page":10,hover:"",sorter:"",pagination:""},on:{"filtered-items-change":e.setCurrentItems},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.item,a=t.index;return[n("td",{staticClass:"py-0"},[n("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"<strong>Edit</strong>",placement:"bottom"},expression:"{\n                                    content: '<strong>Edit</strong>',\n                                    placement: 'bottom'\n                                }"}],staticClass:"m-1",attrs:{color:"success",square:"",size:"sm"},on:{click:function(t){return e.editItem(r,a)}}},[n("CIcon",{attrs:{name:"cil-pencil"}})],1),0!=r.delete_allowed?n("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"<strong>Delete</strong>",placement:"bottom"},expression:"{\n                                    content: '<strong>Delete</strong>',\n                                    placement: 'bottom'\n                                }"}],staticClass:"m-1",attrs:{color:"danger",square:"",size:"sm"},on:{click:function(t){return e.deleteItem(r)}}},[n("CIcon",{attrs:{name:"cil-x-circle"}})],1):e._e()],1)]}}])})],1)],1)],1),n("CModal",{staticClass:"disable-footer",attrs:{title:"Delete Category",show:e.deleteModal,centered:"",fade:""},on:{"update:show":function(t){e.deleteModal=t}}},[n("center",[e._v(" Are you sure you want to delete ? "),n("div",{staticClass:"inactive-modal-response"},[n("CButton",{staticClass:"m-1",attrs:{type:"submit",color:"primary"},on:{click:e.deleteCategory}},[e._v("Yes")]),n("CButton",{staticClass:"m-1",attrs:{type:"submit",color:"secondary"},on:{click:function(t){e.deleteModal=!1}}},[e._v("No")])],1)])],1),n("CModal",{staticClass:"disable-footer",attrs:{title:"Delete Response",show:e.deleteResponseModal,centered:"",fade:""},on:{"update:show":function(t){e.deleteResponseModal=t}}},[n("center",[e._v(" This income category is already selected in a course. "),n("div",{staticClass:"inactive-modal-response"},[n("CButton",{staticClass:"m-1",attrs:{type:"submit",color:"primary"},on:{click:function(t){e.deleteResponseModal=!1}}},[e._v("Ok")])],1)])],1)],1)},a=[],o=n("e45e"),i=n("1dce"),s=n("b5ae");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return g(e)||p(e,t)||m(e,t)||y()}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(c){a=!0,o=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(a)throw o}}return n}}function g(e){if(Array.isArray(e))return e}function f(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=m(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function m(e,t){if(e){if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=[{key:"category_name"},{key:"sequence"},{key:"action",label:"Action",_style:"min-width: 6rem",sorter:!1,filter:!1}],C={data:function(){return{fields:v,addModal:!1,deleteModal:!1,deleteResponseModal:!1,update:!1,addSequence:"",expenseCategory:this.getEmptyForm(),expenseCategoryList:[],categoryNameFeedback:"",sequenceFeedback:"",selectedCategoryIndex:""}},computed:{formString:function(){return JSON.stringify(this.expenseCategory,null,2)},isValid:function(){return!this.$v.expenseCategory.$invalid},isDirty:function(){return this.$v.expenseCategory.$anyDirty}},mixins:[i["validationMixin"]],validations:{expenseCategory:{category_name:{required:s["required"],isValidCategory:function(e){var t,n=f(this.expenseCategoryList.entries());try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),a=r[0],o=r[1];if(a===this.selectedCategoryIndex&&e==o.category_name)return this.categoryNameFeedback="",!0;if(o.category_name==e)return this.categoryNameFeedback="Category name already exist",!1}}catch(i){n.e(i)}finally{n.f()}return this.categoryNameFeedback="",!0}},sequence:{required:s["required"],numeric:s["numeric"],isValidSequence:function(e){var t,n=f(this.expenseCategoryList.entries());try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),a=r[0],o=r[1];if(a===this.selectedCategoryIndex&&e==o.sequence)return this.sequenceFeedback="",!0;if(o.sequence==e)return this.sequenceFeedback="Sequence already exist",!1}}catch(i){n.e(i)}finally{n.f()}return this.sequenceFeedback="",!0}}}},methods:{checkIfValid:function(e){var t=this.$v.expenseCategory[e];return t.$dirty?!(t.$invalid||""===t.$model):null},validate:function(){this.$v.$touch()},reset:function(){this.expenseCategory=this.getEmptyForm(),this.$v.$reset()},getEmptyForm:function(){return{sequence:"",category_name:""}},setCurrentItems:function(e){this.currentItems=e},editItem:function(e,t){this.addModal=!0,this.update=!0,this.selectedCategoryIndex=t,delete e.__typename,this.reset(),this.expenseCategory=u({},e)},deleteItem:function(e){this.expenseCategory=u({},e),this.deleteModal=!0},addCategory:function(){var e=this;this.validate(),this.expenseCategory&&this.isValid&&this.$apollo.mutate({mutation:o["a"].INSERT_EXPENSE_CATEGORY,variables:this.expenseCategory}).then((function(t){var n,r,a=null===t||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.insert_budget_app_expense_category)||void 0===r?void 0:r.returning;a[0].id>0&&(e.addModal=!1,e.$apollo.queries.categoryData.refetch(),e.expenseCategoryList.push(e.expenseCategory),e.reset())})).catch((function(e){console.log(e)})),this.addModal=!1},updateCategory:function(){var e=this;this.validate(),this.isValid&&(this.$apollo.mutate({mutation:o["a"].UPDATE_EXPENSE_CATEGORY,variables:this.expenseCategory}).then((function(t){var n,r,a=null===t||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.update_budget_app_expense_category)||void 0===r?void 0:r.returning;a[0].id>0&&(e.addModal=!1,e.$apollo.queries.categoryData.refetch())})).catch((function(e){console.log(e)})),this.editModal=!1)},deleteCategory:function(){var e=this;this.$apollo.mutate({mutation:o["a"].DELETE_EXPENSE_CATEGORY,variables:{id:this.expenseCategory.id}}).then((function(t){var n,r,a=null===t||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.delete_budget_app_expense_category)||void 0===r?void 0:r.returning;a[0].id>0&&(e.$apollo.queries.categoryData.refetch(),e.deleteModal=!1,e.editModal=!1)})).catch((function(t){JSON.stringify(t).includes("Foreign key violation")&&(e.deleteModal=!1,e.deleteResponseModal=!0)}))}},apollo:{categoryData:{query:o["a"].GET_EXPENSE_CATEGORY,update:function(e){return e},result:function(e){var t=e.data;this.update=!1,this.expenseCategoryList=null===t||void 0===t?void 0:t.budget_app_expense_category}}}},h=C,b=n("2877"),E=Object(b["a"])(h,r,a,!1,null,null,null);t["default"]=E.exports},e45e:function(e,t,n){"use strict";var r=n("9530"),a=n.n(r);function o(){var e=p(["\n    mutation ($id: Int!) {\n        delete_budget_app_expense_category(where: { id: { _eq: $id } }) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return o=function(){return e},e}function i(){var e=p(["\n    mutation ($category_name: String!, $sequence: Int!, $id: Int!) {\n        update_budget_app_expense_category(\n            where: { id: { _eq: $id } }\n            _set: { category_name: $category_name, sequence: $sequence}\n        ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return i=function(){return e},e}function s(){var e=p(["\n    mutation ($category_name: String!, $sequence: Int!) {\n        insert_budget_app_expense_category(\n            objects: { category_name: $category_name, sequence: $sequence }\n        ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return s=function(){return e},e}function c(){var e=p(["\n    query MyQuery {\n        budget_app_expense_category(order_by: { sequence: asc }) {\n            sequence\n            id\n            category_name\n        }\n    }\n"]);return c=function(){return e},e}function u(){var e=p(["\n    mutation ($id: Int!) {\n        delete_budget_app_income_category(where: { id: { _eq: $id } }) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return u=function(){return e},e}function l(){var e=p(["\n    mutation ($category_name: String!, $sequence: Int!, $id: Int!) {\n        update_budget_app_income_category(\n            where: { id: { _eq: $id } }\n            _set: { category_name: $category_name, sequence: $sequence }\n        ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return l=function(){return e},e}function d(){var e=p(["\n    mutation ($category_name: String!, $sequence: Int!) {\n        insert_budget_app_income_category(\n            objects: { category_name: $category_name, sequence: $sequence }\n        ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return d=function(){return e},e}function y(){var e=p(["\n    query MyQuery {\n        budget_app_income_category(order_by: { sequence: asc }) {\n            category_name\n            sequence\n            id\n        }\n    }\n"]);return y=function(){return e},e}function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=a()(y()),f=a()(d()),m=a()(l()),_=a()(u()),v=a()(c()),C=a()(s()),h=a()(i()),b=a()(o());t["a"]={GET_INCOME_CATEGORY:g,INSERT_INCOME_CATEGORY:f,UPDATE_INCOME_CATEGORY:m,DELETE_INCOME_CATEGORY:_,GET_EXPENSE_CATEGORY:v,INSERT_EXPENSE_CATEGORY:C,UPDATE_EXPENSE_CATEGORY:h,DELETE_EXPENSE_CATEGORY:b}}}]);
//# sourceMappingURL=chunk-03db478a.f8f04c48.js.map