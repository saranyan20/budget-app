(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21de52"],{d2f4:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CCard",[n("CCardHeader",[n("h5",[t._v("Budget Manager")])]),n("CCardBody",[n("CRow",[n("CCol",{attrs:{sm:"1"}},[t._v(" Filter: ")]),n("CCol",{attrs:{sm:"3"}},[n("CSelect",{attrs:{placeholder:"Select a year",value:t.selectedYear,options:t.yearOptions},on:{"update:value":function(e){t.selectedYear=e}}})],1),n("CCol",{attrs:{sm:"3"}},[n("CSelect",{attrs:{placeholder:"Select a month",value:t.selectedMonth,options:t.monthOptions},on:{"update:value":function(e){t.selectedMonth=e}}})],1),n("CCol",{attrs:{sm:"1"}},[n("CButton",{attrs:{color:"secondary"},on:{click:t.applyFilter}},[t._v("Apply")])],1),n("CCol",{attrs:{sm:"1"}},[n("CButton",{attrs:{color:"dark"},on:{click:t.clearFilter}},[t._v("Clear")])],1)],1),n("CRow",[n("CCol",{attrs:{col:"12",sm:"6"}},[n("CWidgetProgressIcon",{attrs:{header:""+t.getIndianFormat(t.totalBalance),text:"Available Balance",color:"info",value:t.totalBalance/t.totalIncome*100}})],1),n("CCol",{attrs:{col:"12",sm:"6"}},[n("CWidgetProgressIcon",{attrs:{header:""+t.getIndianFormat(t.totalSavings),text:"Total Savings",color:"info",value:t.totalBalance/t.totalIncome*100}})],1)],1),n("CRow",[n("CCol",[n("CCard",[n("CCardHeader",[n("h4",{staticStyle:{display:"inline-block"}},[t._v("Income List")]),n("CButton",{staticStyle:{float:"right"},attrs:{color:"success"},on:{click:function(e){return t.addItem("Income")}}},[t._v("Add Income")]),n("CCallout",{attrs:{color:"success"}},[n("h6",{staticClass:"text-muted"},[t._v("Total Income")]),n("strong",{staticClass:"h4"},[t._v("₹ "+t._s(t.getIndianFormat(t.totalIncome)))])])],1),n("CCardBody",[n("CDataTable",{staticStyle:{"min-height":"350px"},attrs:{items:t.filteredIncomeList,fields:t.fields,"column-filter":!1,"items-per-page":5,itemsPerPageSelect:!0,hover:"",sorter:"",pagination:"",responsive:""},on:{"filtered-items-change":t.setCurrentItems},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.item;return[n("td",{staticClass:"py-0"},[n("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"<strong>View</strong>",placement:"bottom"},expression:"{\n                                            content:\n                                                '<strong>View</strong>',\n                                            placement: 'bottom'\n                                        }"}],staticClass:"m-1",attrs:{color:"secondary",square:"",size:"sm"},on:{click:function(e){return t.viewBudgetDetails(o)}}},[n("CIcon",{attrs:{name:"cil-file"}})],1)],1)]}}])})],1)],1)],1),n("CCol",[n("CCard",[n("CCardHeader",[n("h4",{staticStyle:{display:"inline-block"}},[t._v("Expense List")]),n("CButton",{staticStyle:{float:"right"},attrs:{color:"danger"},on:{click:function(e){return t.addItem("Expense")}}},[t._v("Add Expense")]),n("CCallout",{attrs:{color:"danger"}},[n("h6",{staticClass:"text-muted"},[t._v("Total Expense")]),n("strong",{staticClass:"h4"},[t._v("₹ "+t._s(t.getIndianFormat(t.totalExpense)))])])],1),n("CCardBody",[n("CDataTable",{staticStyle:{"min-height":"350px"},attrs:{items:t.filteredExpenseList,fields:t.fields,"column-filter":!1,"items-per-page":5,itemsPerPageSelect:!0,hover:"",sorter:"",pagination:"",responsive:""},on:{"filtered-items-change":t.setCurrentItems},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.item;return[n("td",{staticClass:"py-0"},[n("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"<strong>View</strong>",placement:"bottom"},expression:"{\n                                            content:\n                                                '<strong>View</strong>',\n                                            placement: 'bottom'\n                                        }"}],staticClass:"m-1",attrs:{color:"secondary",square:"",size:"sm"},on:{click:function(e){return t.viewBudgetDetails(o)}}},[n("CIcon",{attrs:{name:"cil-file"}})],1)],1)]}}])})],1)],1)],1)],1)],1),n("CModal",{staticClass:"disable-footer",attrs:{title:t.budget.type,show:t.modal,centered:"",fade:""},on:{"update:show":function(e){t.modal=e}}},[n("CForm",[n("CSelect",{attrs:{horizontal:"",label:"Category",lazy:!1,value:t.budget.category,options:"Income"==t.budget.type?t.incomeCategoryOptions:t.expenseCategoryOptions,placeholder:"Please select a category",disabled:t.view},on:{"update:value":function(e){return t.$set(t.budget,"category",e)}}}),n("CInput",{attrs:{horizontal:"",label:"Description",lazy:!1,value:t.budget.description,disabled:t.view},on:{"update:value":function(e){return t.$set(t.budget,"description",e)}}}),n("CInput",{attrs:{horizontal:"",label:"Amount",lazy:!1,value:t.budget.amount,prepend:"₹",disabled:t.view},on:{"update:value":function(e){return t.$set(t.budget,"amount",e)}}})],1),n("br"),n("div",{staticClass:"inactive-modal-response",staticStyle:{float:"right"}},[n("CButton",{staticClass:"m-1",attrs:{type:"submit",color:"primary"},on:{click:t.insertBudgetDetails}},[t._v("Submit")]),n("CButton",{staticClass:"m-1",attrs:{type:"submit",color:"secondary"},on:{click:function(e){t.modal=!1}}},[t._v("Cancel")])],1)],1)],1)},a=[],i=n("9530"),r=n.n(i);function l(){var t=g(["\n    mutation ($login_id: Int!, $amount: Int!) {\n        insert_budget_app_monthly_savings(\n            objects: { login_id: $login_id, amount: $amount }\n        ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return l=function(){return t},t}function s(){var t=g(["\n    mutation(\n        $amount: Int!\n        $category: String!\n        $description: String\n        $type: String!\n        $login_id: Int!\n    ) {\n        insert_budget_app_budget_details(\n            objects: {\n                amount: $amount\n                category: $category\n                description: $description\n                type: $type\n                login_id: $login_id\n            }\n        ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return s=function(){return t},t}function c(){var t=g(["\n    query($login_id: Int!) {\n        budget_app_monthly_savings_aggregate(\n            where: { login_id: { _eq: $login_id } }\n        ) {\n            aggregate {\n                sum {\n                    amount\n                }\n            }\n        }\n    }\n"]);return c=function(){return t},t}function u(){var t=g(["\n    query($login_id: Int!) {\n        budget_app_budget_details(\n            order_by: { transaction_date: desc }\n            where: { login_id: { _eq: $login_id } }\n        ) {\n            amount\n            category\n            description\n            transaction_date\n            type\n        }\n    }\n"]);return u=function(){return t},t}function d(){var t=g(["\n    query MyQuery {\n        budget_app_income_category(order_by: { sequence: asc }) {\n            category_name\n            sequence\n            id\n        }\n        budget_app_expense_category(order_by: { sequence: asc }) {\n            sequence\n            id\n            category_name\n        }\n    }\n"]);return d=function(){return t},t}function g(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var m=r()(d()),p=r()(u()),f=r()(c()),v=r()(s()),h=r()(l()),y={GET_CATEGORIES:m,GET_BUDGET_DETAILS:p,GET_MONTHLY_SAVINGS:f,INSERT_BUDGET_DETAILS:v,INSERT_MONTHLY_SAVINGS:h};function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=S(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,i=!0,r=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}function S(t,e){if(t){if("string"===typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var w=[{key:"transaction_date"},{key:"amount"},{key:"category"},{key:"action",label:"Action",sorter:!1,filter:!1}],x={data:function(){return{fields:w,currentItems:[],selectedYear:(new Date).getFullYear(),selectedMonth:(new Date).getMonth()+1,modal:!1,type:"",budget:this.getEmptyForm(),view:!1,render:!0,incomeCategoryOptions:[],expenseCategoryOptions:[],incomeList:[],expenseList:[],filteredIncomeList:[],filteredExpenseList:[],totalBalance:0,totalIncome:0,totalExpense:0,totalSavings:0,insertSavings:!1}},computed:{yearOptions:function(){return[{label:"2020",value:2020},{label:"2021",value:2021},{label:"2022",value:2022},{label:"2023",value:2023},{label:"2024",value:2024},{label:"2025",value:2025}]},monthOptions:function(){return[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}]}},methods:{getEmptyForm:function(){return{amount:0,category:"",description:"",type:""}},reset:function(){this.budget=this.getEmptyForm()},setCurrentItems:function(t){this.currentItems=t},addItem:function(t){this.reset(),this.modal=!0,this.budget.type=t,this.view=!1},getIndianFormat:function(t){if(""!=t){t=t.toString();var e=t.substring(t.length-3),n=t.substring(0,t.length-3);""!=n&&(e=","+e);var o=n.replace(/\B(?=(\d{2})+(?!\d))/g,",")+e;return o}return 0},getBudgetDetails:function(){var t=this;return new Promise((function(e,n){t.$apollo.mutate({mutation:y.GET_BUDGET_DETAILS,variables:{login_id:localStorage.getItem("login_id")}}).then((function(n){var o,a=[],i=[],r=null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.budget_app_budget_details;if(r.length>0){var l,s=I(r);try{for(s.s();!(l=s.n()).done;){var c=l.value;"Income"==c.type?a.push(c):"Expense"==c.type&&i.push(c)}}catch(u){s.e(u)}finally{s.f()}t.incomeList=a,t.expenseList=i,t.filteredIncomeList=t.incomeList,t.filteredExpenseList=t.expenseList,t.getBudgetAmount("Income",t.filteredIncomeList),t.getBudgetAmount("Expense",t.filteredExpenseList),t.applyFilter(),e()}})).catch((function(t){console.log(t),n()}))}))},getBudgetAmount:function(t,e){var n,o=0,a=I(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o+=i.amount}}catch(r){a.e(r)}finally{a.f()}"Income"==t?this.totalIncome=o:"Expense"==t&&(this.totalExpense=o),this.totalBalance=this.totalIncome-this.totalExpense},getTotalSavings:function(){var t=this;this.$apollo.mutate({mutation:y.GET_MONTHLY_SAVINGS,variables:{login_id:localStorage.getItem("login_id")}}).then((function(e){var n,o,a,i=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(o=n.budget_app_monthly_savings_aggregate)||void 0===o||null===(a=o.aggregate)||void 0===a?void 0:a.sum;i.amount>0&&(t.totalSavings=i.amount)}))},insertBudgetDetails:function(){var t=this;this.$apollo.mutate({mutation:y.INSERT_BUDGET_DETAILS,variables:_({},this.budget,{login_id:localStorage.getItem("login_id")})}).then((function(e){var n,o,a=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(o=n.insert_budget_app_budget_details)||void 0===o?void 0:o.returning;a[0].id>0&&(t.getBudgetDetails(),t.getBudgetAmount("Income",t.filteredIncomeList),t.getBudgetAmount("Expense",t.filteredExpenseList),t.modal=!1)})).catch((function(t){return console.log(t)}))},insertEachMonthSavings:function(){var t=this;console.log("entered"),this.$apollo.mutate({mutation:y.INSERT_MONTHLY_SAVINGS,variables:{login_id:localStorage.getItem("login_id"),amount:this.totalBalance}}).then((function(e){var n,o,a=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(o=n.insert_budget_app_monthly_savings)||void 0===o?void 0:o.returning;console.log(a),a[0].id>0&&(t.insertSavings=!1)})).catch((function(t){console.log(t)}))},viewBudgetDetails:function(t){this.view=!0,this.budget=_({},t),this.modal=!0},applyFilter:function(){var t=this;""==this.selectedYear&&""==this.selectedMonth||(this.filteredIncomeList=this.incomeList,this.filteredExpenseList=this.expenseList,""!=this.selectedMonth&&(this.filteredExpenseList=this.filteredExpenseList.filter((function(e){return new Date(e.transaction_date).getMonth()+1==t.selectedMonth})),this.filteredIncomeList=this.filteredIncomeList.filter((function(e){return new Date(e.transaction_date).getMonth()+1==t.selectedMonth})),this.getBudgetAmount("Expense",this.filteredExpenseList),this.getBudgetAmount("Income",this.filteredIncomeList)),""!=this.selectedYear&&(this.filteredExpenseList=this.filteredExpenseList.filter((function(e){return new Date(e.transaction_date).getFullYear()==t.selectedYear})),this.filteredIncomeList=this.filteredIncomeList.filter((function(e){return new Date(e.transaction_date).getFullYear()==t.selectedYear})),this.getBudgetAmount("Expense",this.filteredExpenseList),this.getBudgetAmount("Income",this.filteredIncomeList)))},clearFilter:function(){this.selectedYear=(new Date).getFullYear(),this.selectedMonth=(new Date).getMonth()+1,this.filteredExpenseList=this.expenseList,this.filteredIncomeList=this.incomeList,this.getBudgetAmount("Expense",this.filteredExpenseList),this.getBudgetAmount("Income",this.filteredIncomeList)}},apollo:{categoryData:{query:y.GET_CATEGORIES,update:function(t){return t},result:function(t){var e=t.data;this.update=!1;var n,o=[],a=[],i=I(null===e||void 0===e?void 0:e.budget_app_income_category);try{for(i.s();!(n=i.n()).done;){var r=n.value;o.push({label:r.category_name,value:r.category_name})}}catch(u){i.e(u)}finally{i.f()}var l,s=I(null===e||void 0===e?void 0:e.budget_app_expense_category);try{for(s.s();!(l=s.n()).done;){var c=l.value;a.push({label:c.category_name,value:c.category_name})}}catch(u){s.e(u)}finally{s.f()}this.incomeCategoryOptions=o,this.expenseCategoryOptions=a,this.getBudgetDetails(),this.getTotalSavings()}}}},L=x,B=n("2877"),O=Object(B["a"])(L,o,a,!1,null,null,null);e["default"]=O.exports}}]);
//# sourceMappingURL=chunk-2d21de52.9b8823ed.js.map