(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2248a4"],{e124:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CCard",[n("CCardHeader",[n("h5",[e._v("Budget Dashboard")])]),n("CCardBody",[n("CRow",[n("CCol",{attrs:{sm:"6"}},[n("CSelect",{attrs:{value:e.selectedYear,options:e.yearOptions},on:{"update:value":function(t){e.selectedYear=t}}})],1)],1),n("br"),n("CCardGroup",{staticClass:"card-columns",attrs:{deck:""}},[n("CCard",{staticClass:"custom-card",staticStyle:{"margin-right":"0"}},[n("CCardHeader",[e._v("Amount of expense by month")]),n("CCardBody",[n("CChartBar",{key:1,staticStyle:{height:"300px"},attrs:{datasets:e.expenseAmountByMonth,labels:"months",options:{maintainAspectRatio:!1}}})],1)],1),n("CCard",{staticClass:"custom-card",staticStyle:{"margin-right":"0"}},[n("CCardHeader",[e._v("Amount of expense by category")]),n("CCardBody",[n("CSelect",{attrs:{value:e.selectedMonth,options:e.monthOptions},on:{"update:value":function(t){e.selectedMonth=t}}}),n("br"),n("CChartPie",{key:1,staticStyle:{height:"300px"},attrs:{datasets:e.expenseAmountByCategory,labels:e.expenseCategory,options:{maintainAspectRatio:!1}}})],1)],1)],1)],1)],1)},r=[],o=n("9530"),l=n.n(o);function s(){var e=u(["\n    query ($login_id: Int!) {\n        budget_app_budget_details(\n            order_by: { transaction_date: desc }\n            where: { login_id: { _eq: $login_id } }\n        ) {\n            amount\n            category\n            description\n            transaction_date\n            type\n        }\n    }\n"]);return s=function(){return e},e}function i(){var e=u(["\n    query MyQuery {\n        budget_app_income_category(order_by: { sequence: asc }) {\n            category_name\n            sequence\n            id\n        }\n        budget_app_expense_category(order_by: { sequence: asc }) {\n            sequence\n            id\n            category_name\n        }\n    }\n"]);return i=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=l()(i()),d=l()(s()),y={GET_CATEGORIES:c,GET_BUDGET_DETAILS:d};function p(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=h(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw r}}}}function h(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var f={data:function(){return{selectedYear:(new Date).getFullYear(),selectedMonth:(new Date).getMonth()+1,expenseByMonth:[],expenseByCategory:[],expenseCategory:[],incomeCategoryOptions:[],expenseCategoryOptions:[],incomeList:[],expenseList:[]}},computed:{yearOptions:function(){return[{label:"2020",value:2020},{label:"2021",value:2021},{label:"2022",value:2022},{label:"2023",value:2023},{label:"2024",value:2024},{label:"2025",value:2025}]},monthOptions:function(){return[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}]},expenseAmountByMonth:function(){return[{data:this.expenseByMonth,backgroundColor:"#E55353",label:"Amount"}]},expenseAmountByCategory:function(){return[{data:this.expenseByCategory,backgroundColor:["#E55353","#41B883","#E46651","#00D8FF","#DD1B16"],label:"No of jobs"}]}},watch:{selectedYear:function(){this.getExpenseByMonth(),this.getExpenseByCategory()},selectedMonth:function(){this.getExpenseByMonth(),this.getExpenseByCategory()}},methods:{getBudgetDetails:function(){var e=this;this.$apollo.mutate({mutation:y.GET_BUDGET_DETAILS,variables:{login_id:localStorage.getItem("login_id")}}).then((function(t){var n,a=[],r=[],o=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.budget_app_budget_details;if(o.length>0){var l,s=p(o);try{for(s.s();!(l=s.n()).done;){var i=l.value;"Income"==i.type?a.push(i):"Expense"==i.type&&r.push(i)}}catch(u){s.e(u)}finally{s.f()}e.incomeList=a,e.expenseList=r,e.getExpenseByMonth(),e.getExpenseByCategory()}})).catch((function(e){return console.log(e)}))},getExpenseByMonth:function(){var e,t=[0,0,0,0,0,0,0,0,0,0,0,0],n=p(this.expenseList);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=new Date(a.transaction_date).getMonth()+1,o=new Date(a.transaction_date).getFullYear();o==this.selectedYear&&(t[r-1]+=a.amount)}}catch(l){n.e(l)}finally{n.f()}this.expenseByMonth=t},getExpenseByCategory:function(){var e,t=[],n=[],a=p(this.expenseList);try{for(a.s();!(e=a.n()).done;){var r=e.value,o=new Date(r.transaction_date).getMonth()+1,l=new Date(r.transaction_date).getFullYear();if(l==this.selectedYear&&o==this.selectedMonth){var s,i=p(this.expenseCategoryOptions);try{for(i.s();!(s=i.n()).done;){var u=s.value;r.category==u&&(t.push(r.amount),n.push(r.category))}}catch(c){i.e(c)}finally{i.f()}}}}catch(c){a.e(c)}finally{a.f()}this.expenseByCategory=t,this.expenseCategory=n}},apollo:{categoryData:{query:y.GET_CATEGORIES,update:function(e){return e},result:function(e){var t=e.data;this.update=!1;var n,a=[],r=[],o=p(null===t||void 0===t?void 0:t.budget_app_income_category);try{for(o.s();!(n=o.n()).done;){var l=n.value;a.push(l.category_name)}}catch(c){o.e(c)}finally{o.f()}var s,i=p(null===t||void 0===t?void 0:t.budget_app_expense_category);try{for(i.s();!(s=i.n()).done;){var u=s.value;r.push(u.category_name)}}catch(c){i.e(c)}finally{i.f()}this.incomeCategoryOptions=a,this.expenseCategoryOptions=r,this.getBudgetDetails()}}}},v=f,b=n("2877"),C=Object(b["a"])(v,a,r,!1,null,null,null);t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-2d2248a4.caa95efa.js.map